<!DOCTYPE html>
<html class="h-full" lang="tr">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Travel App - Exportable Camera Viewfinder</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <style>
      html,
      body {
        height: 100%;
        margin: 0;
        background-color: #000;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica,
          Arial, "Apple Color Emoji", "Segoe UI Emoji";
      }

      .app {
        min-height: 100%;
        display: grid;
        place-items: center;
        padding: 1rem;
      }

      .phone-frame {
        width: min(92vw, 420px);
      }

      .preview {
        position: relative;
        aspect-ratio: 9 / 16;
        border-radius: 1.6rem;
        overflow: hidden;
        box-shadow: 0 30px 60px rgba(0, 0, 0, 0.45);
      }

      .bg-layer {
        position: absolute;
        inset: 0;
      }

      .bg-layer img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .bracket {
        width: 40px;
        height: 40px;
        border: 2px solid rgba(255, 255, 255, 0.7);
        position: absolute;
      }

      .bracket-tl {
        top: 15%;
        left: 10%;
        border-right: 0;
        border-bottom: 0;
      }

      .bracket-tr {
        top: 15%;
        right: 10%;
        border-left: 0;
        border-bottom: 0;
      }

      .bracket-bl {
        bottom: 25%;
        left: 10%;
        border-right: 0;
        border-top: 0;
      }

      .bracket-br {
        bottom: 25%;
        right: 10%;
        border-left: 0;
        border-top: 0;
      }

      .focus-circle {
        width: 80px;
        height: 80px;
        border: 1px solid rgba(255, 255, 255, 0.4);
        border-radius: 9999px;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }

      .glass-pill {
        background: rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
      }

      .text-shadow-sm {
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
      }
    </style>
  </head>

  <body>
    <div class="app">
      <section class="phone-frame space-y-4">
        <div class="grid gap-2 rounded-xl bg-neutral-900/80 p-3 text-white">
          <label class="text-xs uppercase tracking-wider text-white/70" for="bgFile">
            Arka plan resmi yükle
          </label>
          <input id="bgFile" type="file" accept="image/*" class="text-sm" />

          <label class="text-xs uppercase tracking-wider text-white/70" for="locationInput">
            Lokasyon yazısı
          </label>
          <input id="locationInput" type="text" value="Colosseum" class="rounded-md border-0 bg-white/10 text-white" />

          <button id="exportBtn" class="rounded-lg bg-emerald-500 px-4 py-2 font-semibold text-black hover:bg-emerald-400 transition-colors">
            Görseli PNG Olarak Export Et
          </button>
          <p id="status" class="text-xs text-white/70"></p>
        </div>

        <div id="captureScene" class="preview relative flex flex-col items-center justify-between text-white">
          <div class="bg-layer z-0">
            <img
              id="backgroundImage"
              alt="Colosseum Viewfinder"
              src="https://images.unsplash.com/photo-1552832230-c0197dd311b5?auto=format&fit=crop&w=1200&q=80"
              crossorigin="anonymous"
            />
            <div class="absolute inset-0 bg-black/30"></div>
          </div>

          <header class="relative z-10 w-full p-6 flex justify-start items-center">
            <button aria-label="Go back" class="p-2 bg-black/20 rounded-full backdrop-blur-sm">
              <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M15.75 19.5L8.25 12l7.5-7.5" stroke-linecap="round" stroke-linejoin="round"></path>
              </svg>
            </button>
          </header>

          <main class="relative z-10 flex-grow w-full flex flex-col items-center justify-center pointer-events-none">
            <div class="bracket bracket-tl"></div>
            <div class="bracket bracket-tr"></div>
            <div class="bracket bracket-bl"></div>
            <div class="bracket bracket-br"></div>
            <div class="focus-circle"></div>
          </main>

          <footer class="relative z-10 w-full pb-12 flex flex-col items-center gap-6 px-4">
            <div id="locationPill" class="glass-pill px-6 py-2 rounded-full border border-white/20 text-lg font-medium tracking-wide">
              Colosseum
            </div>

            <div class="text-center space-y-1">
              <p class="text-xs text-white/80 uppercase tracking-widest text-shadow-sm">Free plan: 6 scans left today.</p>
              <p class="text-base font-light text-shadow-sm italic">Try capturing the full facade</p>
            </div>

            <div class="flex flex-col items-center gap-3">
              <button class="relative flex items-center justify-center w-20 h-20 rounded-full border-2 border-white bg-transparent">
                <div class="w-16 h-16 rounded-full border-2 border-white/40 flex items-center justify-center">
                  <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"></path>
                    <path
                      clip-rule="evenodd"
                      d="M1.323 11.447C2.811 6.976 7.028 3.75 12.001 3.75c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113-1.487 4.471-5.705 7.697-10.677 7.697-4.97 0-9.186-3.223-10.675-7.69a1.762 1.762 0 0 1 0-1.113ZM17.25 12a5.25 5.25 0 1 1-10.5 0 5.25 5.25 0 0 1 10.5 0Z"
                      fill-rule="evenodd"
                    ></path>
                  </svg>
                </div>
              </button>
              <span class="text-sm font-semibold tracking-wide text-shadow-sm">Tap to perceive</span>
            </div>
          </footer>
        </div>
      </section>
    </div>

    <script>
      const bgFileInput = document.getElementById('bgFile');
      const backgroundImage = document.getElementById('backgroundImage');
      const exportBtn = document.getElementById('exportBtn');
      const captureScene = document.getElementById('captureScene');
      const statusLabel = document.getElementById('status');
      const locationInput = document.getElementById('locationInput');
      const locationPill = document.getElementById('locationPill');

      bgFileInput.addEventListener('change', (event) => {
        const file = event.target.files?.[0];
        if (!file) {
          return;
        }

        const reader = new FileReader();
        reader.onload = () => {
          backgroundImage.src = String(reader.result);
          statusLabel.textContent = `Yüklendi: ${file.name}`;
        };
        reader.readAsDataURL(file);
      });

      locationInput.addEventListener('input', () => {
        locationPill.textContent = locationInput.value.trim() || 'Konum';
      });

      exportBtn.addEventListener('click', async () => {
        statusLabel.textContent = 'Export hazırlanıyor...';
        try {
          const canvas = await html2canvas(captureScene, {
            useCORS: true,
            scale: 2,
            backgroundColor: '#000000'
          });

          const link = document.createElement('a');
          const timestamp = new Date().toISOString().replace(/[:.]/g, '-');
          link.download = `travel-viewfinder-${timestamp}.png`;
          link.href = canvas.toDataURL('image/png');
          link.click();

          statusLabel.textContent = 'PNG export başarıyla indirildi.';
        } catch (error) {
          console.error(error);
          statusLabel.textContent = 'Export başarısız oldu. Konsolu kontrol edin.';
        }
      });
    </script>
  </body>
</html>
